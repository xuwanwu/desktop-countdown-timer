# 桌面悬浮倒计时小组件

一个功能强大的桌面悬浮倒计时工具，基于Electron开发，支持Windows 11系统。

## ✨ 核心特性

### 🪟 窗口行为
- ✅ **始终置顶显示** - 即使在全屏PPT上方也能显示
- ✅ **半透明悬浮** - 可调节透明度（20%-100%）
- ✅ **智能吸附** - 拖动到屏幕四角自动吸附
- ✅ **紧凑设计** - 250x120像素，适合角落显示

### ⏱️ 倒计时功能
- ✅ **默认3分钟** - 启动即可使用
- ✅ **快捷选项** - 3/4/6分钟一键设置
- ✅ **自定义时间** - 支持1-60分钟任意设置
- ✅ **超时提醒** - 超时后红色正计时并闪烁

### 🎮 交互设计
- ✅ **鼠标悬停** - 自动显示控制面板
- ✅ **全局快捷键** - 空格(开始/暂停)、R(重置)、1/2/3(快捷时间)
- ✅ **右键菜单** - 快速访问所有功能
- ✅ **双击切换** - 切换控制面板显示

### 🎨 视觉效果
- ✅ **红白主题** - 简洁现代的设计
- ✅ **状态颜色** 
  - 🟢 绿色：进行中
  - 🔴 红色：超时
  - ⚪ 灰色：暂停
- ✅ **实时进度条** - 可视化时间进度

## 🚀 快速开始

### 安装依赖

```bash
npm install
```

### 启动应用

```bash
npm start
```

### 打包应用

```bash
npm run package
```

打包后的安装程序将生成在 `dist` 目录中。

## 📄 单文件直接使用版

- 新增 `index-standalone.html`，将样式和逻辑全部内联，一个文件即可运行。
- 直接双击或在浏览器中打开即可使用，无需安装依赖或启动 Electron。
- 浏览器环境下的快捷键仅在页面内生效，不包含系统级快捷键、托盘或吸附窗口等桌面特性。

## 📖 使用说明

### 基本操作

1. **启动应用** - 应用会自动最小化到系统托盘，窗口显示在右下角
2. **开始计时** - 点击"开始"按钮或按空格键
3. **暂停计时** - 点击"暂停"按钮或再次按空格键
4. **重置计时** - 点击"重置"按钮或按R键

### 快捷键

| 快捷键 | 功能 |
|--------|------|
| `Space` | 开始/暂停 |
| `R` | 重置 |
| `1` | 设置3分钟 |
| `2` | 设置4分钟 |
| `3` | 设置6分钟 |

### 窗口操作

- **拖动窗口** - 点击顶部红色条拖动
- **自动吸附** - 拖动到屏幕四角附近会自动吸附
- **调节透明度** - 在控制面板中拖动透明度滑块
- **显示/隐藏控制** - 鼠标悬停自动显示，或双击时间显示区域

### 自定义时间

1. 在"分钟"输入框中输入1-60之间的数字
2. 点击"设置"按钮
3. 或按回车键快速设置

### 系统托盘

- **左键点击** - 显示/隐藏窗口
- **右键点击** - 显示托盘菜单
  - 显示
  - 隐藏
  - 退出

## 🎯 适用场景

- 📊 **演讲计时** - PPT演讲时的时间提醒
- 🎓 **考试计时** - 模拟考试时间管理
- 👨‍💻 **番茄工作法** - 专注工作时间管理
- 🍳 **厨房计时** - 烹饪时间提醒
- 🏃 **运动计时** - 间歇训练计时

## ⚙️ 技术特性

- **框架** - Electron 27.0.0
- **始终置顶** - 使用screen-saver级别确保全屏应用上方显示
- **跨工作区** - 支持在全屏应用中可见
- **低资源占用** - 优化性能，不影响演示
- **无边框透明** - 现代化的悬浮窗口设计

## 📝 开发说明

### 项目结构

```
桌面倒计时/
├── main.js          # 主进程（窗口管理、托盘、快捷键）
├── index.html       # 界面结构
├── styles.css       # 样式设计
├── renderer.js      # 渲染进程（倒计时逻辑）
├── package.json     # 项目配置
└── README.md        # 说明文档
```

### 关键技术点

1. **窗口置顶**
```javascript
mainWindow.setAlwaysOnTop(true, 'screen-saver', 1);
mainWindow.setVisibleOnAllWorkspaces(true, { visibleOnFullScreen: true });
```

2. **角落吸附算法**
```javascript
// 在main.js中实现，距离角落50像素内自动吸附
```

3. **全局快捷键**
```javascript
globalShortcut.register('Space', callback);
```

4. **透明度控制**
```javascript
mainWindow.setOpacity(opacity);
```

## 🐛 常见问题

### Q: 窗口不在全屏PPT上方显示？
A: 确保使用了`screen-saver`级别的置顶和`visibleOnFullScreen`选项。

### Q: 快捷键不生效？
A: 全局快捷键可能与其他应用冲突，请检查是否有其他应用占用了相同的快捷键。

### Q: 窗口拖动不顺畅？
A: 确保只在红色拖动条区域拖动，其他区域用于交互操作。

### Q: 如何完全退出应用？
A: 右键点击系统托盘图标，选择"退出"。

## 📜 许可证

MIT License

## 🔧 系统要求

- Windows 11（推荐）
- Windows 10（兼容）
- Node.js 16.0.0 或更高版本
- 至少 100MB 可用磁盘空间

## 💡 提示

- 首次使用时，建议先测试快捷键功能
- 演讲前建议提前设置好透明度和位置
- 可以配合PPT的演讲者视图使用，效果更佳
- 建议将透明度设置在70-90%之间，既不遮挡内容又清晰可见

## 🎨 自定义

如需自定义样式，可以修改`styles.css`文件中的颜色和尺寸：

```css
/* 主题色 */
.drag-handle {
  background: linear-gradient(90deg, #ff4444, #ff6666);
}

/* 窗口尺寸（需同步修改main.js中的WINDOW_WIDTH和WINDOW_HEIGHT） */
.app-container {
  width: 250px;
}
```

---

**享受高效的时间管理！** ⏰✨



