# GitHub Actions è‡ªåŠ¨æ‰“åŒ…è¯´æ˜

æœ¬é¡¹ç›®é…ç½®äº† GitHub Actions å·¥ä½œæµï¼Œå¯ä»¥è‡ªåŠ¨æ„å»º Windows ç‰ˆæœ¬çš„å®‰è£…ç¨‹åºã€‚

## ğŸ“‹ å·¥ä½œæµæ–‡ä»¶

### 1. `build-electron-windows.yml` - æŒç»­é›†æˆæ„å»º

**è§¦å‘æ¡ä»¶ï¼š**
- æ¨é€åˆ° `main` æˆ– `master` åˆ†æ”¯
- åˆ›å»º Pull Request
- æ¨é€æ ‡ç­¾ï¼ˆ`v*`ï¼‰
- æ‰‹åŠ¨è§¦å‘

**åŠŸèƒ½ï¼š**
- è‡ªåŠ¨å®‰è£…ä¾èµ–
- æ„å»º Windows å®‰è£…ç¨‹åº
- ä¸Šä¼ æ„å»ºäº§ç‰©ä¸º Artifacts
- æ ‡ç­¾æ¨é€æ—¶è‡ªåŠ¨åˆ›å»º Release

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# æ¨é€ä»£ç å³å¯è§¦å‘
git push origin main

# æˆ–æ‰‹åŠ¨è§¦å‘ï¼ˆåœ¨ GitHub ç½‘é¡µä¸Šï¼‰
Actions -> Build Electron Windows -> Run workflow
```

---

### 2. `release.yml` - æ­£å¼ç‰ˆæœ¬å‘å¸ƒ

**è§¦å‘æ¡ä»¶ï¼š**
- æ¨é€ç‰ˆæœ¬æ ‡ç­¾ï¼ˆ`v*.*.*`ï¼Œä¾‹å¦‚ `v1.0.13`ï¼‰
- æ‰‹åŠ¨è§¦å‘ï¼ˆå¯æŒ‡å®šç‰ˆæœ¬å·ï¼‰

**åŠŸèƒ½ï¼š**
- æ„å»º NSIS å®‰è£…ç¨‹åº
- æ„å»ºä¾¿æºç‰ˆï¼ˆPortableï¼‰
- ä¸Šä¼ ä¸¤ç§ç‰ˆæœ¬çš„æ„å»ºäº§ç‰©
- è‡ªåŠ¨åˆ›å»º GitHub Release å¹¶é™„å¸¦å®‰è£…åŒ…
- ç”Ÿæˆå‘å¸ƒè¯´æ˜

**ä½¿ç”¨æ–¹æ³•ï¼š**

#### æ–¹æ³•ä¸€ï¼šæ¨é€æ ‡ç­¾ï¼ˆæ¨èï¼‰
```bash
# 1. æ›´æ–° package.json ä¸­çš„ç‰ˆæœ¬å·
# 2. æäº¤æ›´æ”¹
git add package.json
git commit -m "chore: bump version to 1.0.14"

# 3. åˆ›å»ºå¹¶æ¨é€æ ‡ç­¾
git tag v1.0.14
git push origin v1.0.14

# GitHub Actions ä¼šè‡ªåŠ¨æ„å»ºå¹¶åˆ›å»º Release
```

#### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨è§¦å‘
1. è®¿é—® GitHub ä»“åº“é¡µé¢
2. ç‚¹å‡» `Actions` æ ‡ç­¾
3. é€‰æ‹© `Release Build` å·¥ä½œæµ
4. ç‚¹å‡» `Run workflow`
5. è¾“å…¥ç‰ˆæœ¬å·ï¼ˆä¾‹å¦‚ï¼š`1.0.14`ï¼‰
6. ç‚¹å‡» `Run workflow` æŒ‰é’®

---

## ğŸ“¦ æ„å»ºäº§ç‰©

æ„å»ºå®Œæˆåï¼Œæ‚¨å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®æ‰¾åˆ°å®‰è£…åŒ…ï¼š

### Artifactsï¼ˆæ‰€æœ‰æ„å»ºï¼‰
- ä½ç½®ï¼šActions è¿è¡Œé¡µé¢ -> Artifacts éƒ¨åˆ†
- æ–‡ä»¶ï¼š
  - `å€’è®¡æ—¶å°ç»„ä»¶-{ç‰ˆæœ¬å·}-Setup.exe` - å®‰è£…ç‰ˆ
  - `å€’è®¡æ—¶å°ç»„ä»¶-{ç‰ˆæœ¬å·}-Portable.exe` - ä¾¿æºç‰ˆï¼ˆå¦‚æœæ„å»ºæˆåŠŸï¼‰

### Releasesï¼ˆæ ‡ç­¾æ¨é€ï¼‰
- ä½ç½®ï¼šä»“åº“é¦–é¡µ -> Releases
- è‡ªåŠ¨åˆ›å»ºçš„ Release åŒ…å«ï¼š
  - å®‰è£…ç¨‹åºæ–‡ä»¶
  - è‡ªåŠ¨ç”Ÿæˆçš„æ›´æ–°è¯´æ˜
  - æºä»£ç å‹ç¼©åŒ…

---

## ğŸ”§ é…ç½®è¯´æ˜

### å¿…éœ€çš„é…ç½®

1. **package.json ä¸­çš„æ„å»ºè„šæœ¬**
   ```json
   {
     "scripts": {
       "build": "electron-builder --win --x64",
       "build:portable": "electron-builder --win portable"
     }
   }
   ```
   âœ… å·²é…ç½®

2. **electron-builder é…ç½®**
   - åœ¨ `package.json` ä¸­çš„ `build` å­—æ®µ
   âœ… å·²é…ç½®

### å¯é€‰é…ç½®

1. **GitHub Token**
   - å·¥ä½œæµä½¿ç”¨ `GITHUB_TOKEN`ï¼ˆè‡ªåŠ¨æä¾›ï¼‰
   - æ— éœ€é¢å¤–é…ç½®

2. **ä»£ç ç­¾å**ï¼ˆå¯é€‰ï¼‰
   å¦‚éœ€ç­¾åï¼Œæ·»åŠ ä»¥ä¸‹ secretsï¼š
   - `WINDOWS_CERTIFICATE_FILE`ï¼šè¯ä¹¦æ–‡ä»¶ï¼ˆbase64 ç¼–ç ï¼‰
   - `WINDOWS_CERTIFICATE_PASSWORD`ï¼šè¯ä¹¦å¯†ç 

---

## ğŸ“ å®Œæ•´å‘å¸ƒæµç¨‹ç¤ºä¾‹

å‡è®¾è¦å‘å¸ƒ v1.0.14 ç‰ˆæœ¬ï¼š

```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
# ç¼–è¾‘ package.jsonï¼Œå°† version æ”¹ä¸º "1.0.14"

# 2. æ›´æ–° CHANGELOG.md
# æ·»åŠ  v1.0.14 çš„æ›´æ–°å†…å®¹

# 3. æäº¤æ›´æ”¹
git add package.json CHANGELOG.md
git commit -m "chore: release v1.0.14"

# 4. åˆ›å»ºæ ‡ç­¾
git tag -a v1.0.14 -m "Release v1.0.14"

# 5. æ¨é€åˆ° GitHub
git push origin main
git push origin v1.0.14

# 6. ç­‰å¾… GitHub Actions å®Œæˆæ„å»º
# è®¿é—® https://github.com/ä½ çš„ç”¨æˆ·å/ä»“åº“å/actions æŸ¥çœ‹è¿›åº¦

# 7. æ„å»ºå®Œæˆåï¼Œåœ¨ Releases é¡µé¢ä¸‹è½½å®‰è£…åŒ…
# è®¿é—® https://github.com/ä½ çš„ç”¨æˆ·å/ä»“åº“å/releases
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### æ„å»ºå¤±è´¥

1. **æ£€æŸ¥æ—¥å¿—**
   - è®¿é—® Actions é¡µé¢
   - ç‚¹å‡»å¤±è´¥çš„å·¥ä½œæµè¿è¡Œ
   - æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

2. **å¸¸è§é—®é¢˜**
   - `npm install` å¤±è´¥ï¼šæ£€æŸ¥ package.json ä¾èµ–
   - `electron-builder` å¤±è´¥ï¼šæ£€æŸ¥ build é…ç½®
   - æ‰¾ä¸åˆ°æ„å»ºäº§ç‰©ï¼šæ£€æŸ¥ dist ç›®å½•è·¯å¾„

### æ— æ³•åˆ›å»º Release

1. **æ£€æŸ¥æƒé™**
   - ç¡®ä¿ä»“åº“è®¾ç½®ä¸­å¯ç”¨äº† Actions
   - ç¡®ä¿ Actions æœ‰å†™å…¥æƒé™

2. **æ£€æŸ¥æ ‡ç­¾æ ¼å¼**
   - å¿…é¡»æ˜¯ `v*.*.*` æ ¼å¼ï¼ˆä¾‹å¦‚ `v1.0.14`ï¼‰
   - ä¸èƒ½æ˜¯ `1.0.14` æˆ– `version-1.0.14`

---

## ğŸ’¡ æç¤º

1. **æœ¬åœ°æµ‹è¯•**
   ```bash
   # åœ¨æ¨é€å‰ï¼Œå…ˆæœ¬åœ°æµ‹è¯•æ„å»º
   npm run build
   ```

2. **æŸ¥çœ‹æ„å»ºæ—¶é—´**
   - é€šå¸¸éœ€è¦ 5-10 åˆ†é’Ÿ
   - å¯åœ¨ Actions é¡µé¢å®æ—¶æŸ¥çœ‹è¿›åº¦

3. **ä¸‹è½½ Artifacts**
   - Artifacts ä¿ç•™ 90 å¤©
   - å»ºè®®åŠæ—¶ä¸‹è½½æˆ–åˆ›å»º Release

4. **ç‰ˆæœ¬å·ç®¡ç†**
   - éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemantic Versioningï¼‰
   - MAJOR.MINOR.PATCHï¼ˆä¾‹å¦‚ï¼š1.0.14ï¼‰

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **æ¨é€ä»£ç åˆ° GitHub**
   ```bash
   git add .github/workflows/
   git commit -m "ci: add GitHub Actions workflows for Windows build"
   git push origin main
   ```

2. **æµ‹è¯•å·¥ä½œæµ**
   - æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡æ„å»º
   - æ£€æŸ¥æ˜¯å¦æˆåŠŸç”Ÿæˆå®‰è£…åŒ…

3. **å‘å¸ƒç¬¬ä¸€ä¸ªç‰ˆæœ¬**
   - åˆ›å»º v1.0.13 æ ‡ç­¾
   - éªŒè¯è‡ªåŠ¨å‘å¸ƒæµç¨‹

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸš€
