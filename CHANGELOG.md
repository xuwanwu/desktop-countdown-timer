# 更新日志

所有重要的项目变更都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [1.0.13] - 2025-12-01

### 🐛 修复

#### 快捷键标签同步
- 🔄 **自动更新标签** - 修改自定义快捷时间时，快捷键设置区域的标签会自动同步更新
- ✅ **显示一致性** - 快捷键标签现在显示实际设置的分钟数，而不是硬编码的"3分钟"、"4分钟"、"6分钟"

---

## [1.0.0] - 2025-12-01

### ✨ 新增功能

#### 核心功能
- 🪟 始终置顶显示，支持全屏PPT上方显示
- ⏱️ 默认3分钟倒计时功能
- 🎯 快捷时间选项：3/4/6分钟
- 📝 自定义时间输入：1-60分钟
- 🚨 超时后红色正计时并闪烁提醒
- ⏸️ 开始/暂停/重置功能

#### 窗口特性
- 🎨 半透明悬浮窗口
- 🔄 可调节透明度：20%-100%
- 📍 拖动到屏幕四角自动吸附
- 💎 紧凑设计：250x120像素
- 🖼️ 无边框透明窗口
- 🌈 圆角设计符合Windows 11

#### 交互功能
- 🖱️ 鼠标悬停自动显示控制面板
- 🖱️ 双击时间显示切换控制面板
- 🖱️ 右键菜单快速访问功能
- 🖱️ 拖动红色条移动窗口
- ⌨️ 全局快捷键支持

#### 快捷键
- ⌨️ 空格键：开始/暂停
- ⌨️ R键：重置计时
- ⌨️ 1键：设置3分钟
- ⌨️ 2键：设置4分钟
- ⌨️ 3键：设置6分钟

#### 视觉效果
- 🟢 绿色：计时进行中
- 🔴 红色：超时状态（闪烁）
- ⚪ 灰色：暂停状态
- 📊 实时进度条显示
- ✨ 流畅的动画过渡

#### 系统集成
- 🔔 系统托盘图标
- 📋 托盘右键菜单
- 👁️ 启动后自动显示
- 💾 窗口位置记忆
- 🖥️ 多显示器支持

#### 性能优化
- ⚡ 低资源占用（~50MB内存）
- 🚀 快速启动（<3秒）
- 🔋 电池友好设计
- 🎮 不影响演示性能

### 📦 技术实现

#### 框架与依赖
- Electron 27.0.0
- Node.js 16.0.0+
- 原生JavaScript（无额外框架）

#### 核心技术
- 窗口始终置顶（screen-saver级别）
- 全屏应用可见性（visibleOnFullScreen）
- 角落吸附算法
- 全局快捷键注册
- 系统托盘集成
- 透明度控制

### 📚 文档

#### 完整文档
- ✅ README.md - 完整功能说明
- ✅ 安装说明.md - 详细安装步骤
- ✅ 使用技巧.md - 进阶使用技巧
- ✅ Windows11优化说明.md - Win11特定优化
- ✅ 快速参考.txt - 快速参考卡
- ✅ CHANGELOG.md - 更新日志
- ✅ LICENSE - MIT许可证

#### 辅助脚本
- ✅ install.bat - 一键安装依赖
- ✅ start.bat - 快速启动应用
- ✅ package.bat - 打包可执行文件

### 🎯 适用场景

- 📊 演讲计时（PPT演示）
- 🎓 考试模拟计时
- 👨‍💻 番茄工作法
- 🏃 运动间歇训练
- 🍳 厨房烹饪计时
- 📖 学习专注计时

### 🐛 已知问题

- ⚠️ 某些DirectX独占全屏游戏可能无法置顶
- ⚠️ 极少数专业软件的全屏模式可能不兼容
- ⚠️ Windows 11 21H2以下版本部分特性可能受限

### 🔮 计划功能（未来版本）

#### 2.0.0 计划
- [ ] 音效提醒（超时时播放声音）
- [ ] 自定义音效上传
- [ ] 多个计时器并行运行
- [ ] 计时历史记录
- [ ] 统计分析功能

#### 3.0.0 计划
- [ ] 暗色主题支持
- [ ] 自定义主题色
- [ ] 跟随系统主题
- [ ] 更多预设时间选项
- [ ] 计时器模板保存

#### 4.0.0 计划
- [ ] 云端同步设置
- [ ] 多设备同步
- [ ] 移动端配套应用
- [ ] Web控制面板
- [ ] 团队协作功能

#### 长期计划
- [ ] Microsoft 365集成
- [ ] Teams会议计时
- [ ] Outlook日历同步
- [ ] Windows 11小组件
- [ ] Focus Assist自动集成
- [ ] 番茄工作法统计报告
- [ ] AI智能时间建议
- [ ] 语音控制
- [ ] 自动更新功能

### 📈 性能指标

基于Windows 11 Pro 23H2测试：

| 指标 | 数值 |
|------|------|
| 启动时间 | < 3秒 |
| 内存占用 | ~50MB |
| CPU占用 | < 1% |
| GPU占用 | < 5% |
| 安装大小 | ~150MB |
| 运行大小 | ~50MB |

### 🙏 致谢

感谢以下技术和工具：

- Electron团队 - 强大的跨平台框架
- Node.js社区 - 丰富的生态系统
- Windows 11 - 现代化的操作系统
- 所有测试用户的反馈

### 📝 注意事项

1. **首次运行**
   - Windows可能显示SmartScreen警告
   - 点击"更多信息" → "仍要运行"
   - 这是因为应用未签名，完全安全

2. **系统要求**
   - Windows 10/11（推荐Windows 11）
   - Node.js 16.0.0+
   - 至少100MB磁盘空间
   - 建议4GB+内存

3. **全屏兼容性**
   - PowerPoint ✅
   - 浏览器全屏 ✅
   - 视频播放器 ✅
   - DirectX游戏 ⚠️（部分）

### 🔗 相关链接

- 项目主页：（待添加）
- 问题反馈：（待添加）
- 功能建议：（待添加）
- 使用教程：README.md

---

**版本格式说明：**
- MAJOR（主版本）：不兼容的API修改
- MINOR（次版本）：向下兼容的功能性新增
- PATCH（修订号）：向下兼容的问题修正

**日期格式：** YYYY-MM-DD

---

## [1.0.1] - 2025-12-01

### 🐛 修复

#### UI显示问题
- 🔧 **修复窗口高度不足** - 从120px增加到140px，确保内容可见
- 🔧 **修复右键菜单被遮挡** - 提高z-index到99999，改变容器溢出方式
- 🔧 **修复控制面板截断** - 添加滚动支持，内容过多时可滚动查看

#### 任务栏和托盘
- 🔧 **添加任务栏图标** - 改为在Windows任务栏显示应用图标
- 🔧 **优化托盘图标创建** - 使用更可靠的方法，确保图标正常显示
- 🔧 **增强托盘菜单** - 添加更多快捷操作选项

### ✨ 新增

#### 动态窗口
- ✅ **窗口动态调整** - 鼠标悬停或双击时自动展开到合适高度
- ✅ **自动收起** - 鼠标移开后自动恢复紧凑状态
- ✅ **支持滚动** - 控制面板内容过多时支持滚动

#### 增强的系统托盘
- ✅ **显示/隐藏窗口** - 快速控制窗口显示
- ✅ **开始/暂停** - 无需打开窗口即可控制
- ✅ **重置计时** - 托盘菜单快速重置
- ✅ **快捷时间设置** - 3/4/6分钟快速选择
- ✅ **关于对话框** - 显示版本和快捷键信息

#### 视觉改进
- ✅ **自定义滚动条** - 美化的滚动条样式
- ✅ **优化圆角** - 主显示和控制面板分别圆角
- ✅ **改进阴影** - 右键菜单更明显的阴影效果

### 🎨 改进

#### 交互方式
- 💡 **任务栏访问** - 点击任务栏图标显示/隐藏
- 💡 **托盘单击** - 单击托盘图标快速切换
- 💡 **托盘双击** - 双击托盘图标显示并聚焦
- 💡 **托盘右键** - 右键菜单访问所有功能

#### 性能优化
- ⚡ **更流畅的动画** - 优化窗口高度调整过渡
- ⚡ **更好的响应** - 减少不必要的重绘

### 📝 变更

- 🔄 `skipTaskbar: true` → `skipTaskbar: false` - 在任务栏显示图标
- 🔄 窗口高度：120px → 140px（默认）
- 🔄 最大高度：300px → 500px（展开时）
- 🔄 右键菜单z-index：1000 → 99999
- 🔄 容器overflow：hidden → visible

### 📚 文档

- ✅ **更新说明-UI优化.md** - 详细的更新说明文档

---

## [1.0.0] - 2025-12-01

### ✨ 新增功能

#### 核心功能
- 🪟 始终置顶显示，支持全屏PPT上方显示
- ⏱️ 默认3分钟倒计时功能
- 🎯 快捷时间选项：3/4/6分钟
- 📝 自定义时间输入：1-60分钟
- 🚨 超时后红色正计时并闪烁提醒
- ⏸️ 开始/暂停/重置功能

#### 窗口特性
- 🎨 半透明悬浮窗口
- 🔄 可调节透明度：20%-100%
- 📍 拖动到屏幕四角自动吸附
- 💎 紧凑设计：250x120像素
- 🖼️ 无边框透明窗口
- 🌈 圆角设计符合Windows 11

#### 交互功能
- 🖱️ 鼠标悬停自动显示控制面板
- 🖱️ 双击时间显示切换控制面板
- 🖱️ 右键菜单快速访问功能
- 🖱️ 拖动红色条移动窗口
- ⌨️ 全局快捷键支持

#### 快捷键
- ⌨️ 空格键：开始/暂停
- ⌨️ R键：重置计时
- ⌨️ 1键：设置3分钟
- ⌨️ 2键：设置4分钟
- ⌨️ 3键：设置6分钟

#### 视觉效果
- 🟢 绿色：计时进行中
- 🔴 红色：超时状态（闪烁）
- ⚪ 灰色：暂停状态
- 📊 实时进度条显示
- ✨ 流畅的动画过渡

#### 系统集成
- 🔔 系统托盘图标
- 📋 托盘右键菜单
- 👁️ 启动后自动显示
- 💾 窗口位置记忆
- 🖥️ 多显示器支持

#### 性能优化
- ⚡ 低资源占用（~50MB内存）
- 🚀 快速启动（<3秒）
- 🔋 电池友好设计
- 🎮 不影响演示性能

### 📦 技术实现

#### 框架与依赖
- Electron 27.0.0
- Node.js 16.0.0+
- 原生JavaScript（无额外框架）

#### 核心技术
- 窗口始终置顶（screen-saver级别）
- 全屏应用可见性（visibleOnFullScreen）
- 角落吸附算法
- 全局快捷键注册
- 系统托盘集成
- 透明度控制

### 📚 文档

#### 完整文档
- ✅ README.md - 完整功能说明
- ✅ 安装说明.md - 详细安装步骤
- ✅ 使用技巧.md - 进阶使用技巧
- ✅ Windows11优化说明.md - Win11特定优化
- ✅ 快速参考.txt - 快速参考卡
- ✅ CHANGELOG.md - 更新日志
- ✅ LICENSE - MIT许可证

#### 辅助脚本
- ✅ install.bat - 一键安装依赖
- ✅ start.bat - 快速启动应用
- ✅ package.bat - 打包可执行文件

### 🎯 适用场景

- 📊 演讲计时（PPT演示）
- 🎓 考试模拟计时
- 👨‍💻 番茄工作法
- 🏃 运动间歇训练
- 🍳 厨房烹饪计时
- 📖 学习专注计时

### 🐛 已知问题

- ⚠️ 某些DirectX独占全屏游戏可能无法置顶
- ⚠️ 极少数专业软件的全屏模式可能不兼容
- ⚠️ Windows 11 21H2以下版本部分特性可能受限

---

## [1.0.2] - 2025-12-01

### ✨ 新增

#### UI改进
- ✅ **设置按钮** - 在时间显示区域添加⚙️按钮，点击展开/收起控制面板
- ✅ **快捷键设置界面** - 可视化的快捷键配置界面，支持录制功能
- ✅ **快捷键自定义** - 完全自定义所有快捷键，实时生效
- ✅ **配置持久化** - 快捷键和透明度设置保存到localStorage

#### 快捷键系统
- ✅ **改用组合键** - 默认使用Ctrl+Space等组合键，避免影响打字
- ✅ **录制功能** - 点击"录制"按钮，按下想要的组合键即可设置
- ✅ **快捷键验证** - 必须使用组合键（Ctrl/Alt/Shift + 其他键）
- ✅ **恢复默认** - 一键恢复默认快捷键配置

#### 透明度优化
- ✅ **背景透明度独立** - 只调整窗口背景透明度
- ✅ **时间显示清晰** - 时间和进度条始终保持不透明，确保可见性
- ✅ **CSS变量控制** - 使用CSS变量动态控制透明度

### 🐛 修复

- 🔧 **移除双击事件** - 不再使用双击时间显示控制面板，改用设置按钮
- 🔧 **单键快捷键移除** - 移除Space/R/1/2/3单键快捷键，改用组合键

### 🔄 变更

- **默认快捷键**：
  - `Space` → `Ctrl+Space` (开始/暂停)
  - `R` → `Ctrl+R` (重置)
  - `1` → `Ctrl+1` (3分钟)
  - `2` → `Ctrl+2` (4分钟)
  - `3` → `Ctrl+3` (6分钟)

- **控制面板显示**：
  - 移除：双击时间显示
  - 新增：点击⚙️按钮显示
  - 保留：鼠标悬停自动显示

### 📝 文档

- ✅ 更新快速参考.txt中的快捷键说明
- ✅ 更新关于对话框显示当前快捷键
- ✅ 更新版本号到1.0.2

---

## [1.0.1] - 2025-12-01

### 🐛 修复

#### UI显示问题
- 🔧 **修复窗口高度不足** - 从120px增加到140px，确保内容可见
- 🔧 **修复右键菜单被遮挡** - 提高z-index到99999，改变容器溢出方式
- 🔧 **修复控制面板截断** - 添加滚动支持，内容过多时可滚动查看

#### 任务栏和托盘
- 🔧 **添加任务栏图标** - 改为在Windows任务栏显示应用图标
- 🔧 **优化托盘图标创建** - 使用更可靠的方法，确保图标正常显示
- 🔧 **增强托盘菜单** - 添加更多快捷操作选项

### ✨ 新增

#### 动态窗口
- ✅ **窗口动态调整** - 鼠标悬停或双击时自动展开到合适高度
- ✅ **自动收起** - 鼠标移开后自动恢复紧凑状态
- ✅ **支持滚动** - 控制面板内容过多时支持滚动

#### 增强的系统托盘
- ✅ **显示/隐藏窗口** - 快速控制窗口显示
- ✅ **开始/暂停** - 无需打开窗口即可控制
- ✅ **重置计时** - 托盘菜单快速重置
- ✅ **快捷时间设置** - 3/4/6分钟快速选择
- ✅ **关于对话框** - 显示版本和快捷键信息

#### 视觉改进
- ✅ **自定义滚动条** - 美化的滚动条样式
- ✅ **优化圆角** - 主显示和控制面板分别圆角
- ✅ **改进阴影** - 右键菜单更明显的阴影效果

---

## [1.0.12] - 2025-12-01

### 🐛 修复

#### 透明度样式修正
- 🎨 **移除时间背景色** - 修复了时间显示区域有白色背景框的问题，现在时间背景完全透明，完美融合窗口透明度设置
- ✅ **视觉优化** - 只有文字和进度条保持不透明，其余区域（包括时间文字下方）都会随透明度设置而变化

---

## [1.0.11] - 2025-12-01

### 🐛 修复

#### 透明度控制优化
- 🔧 **只影响背景** - 修复了透明度滑块影响时间显示和进度条的问题
- ✅ **内容保持清晰** - 现在更改透明度时，只有背景变透明，时间显示和进度条始终保持完全不透明
- 🎨 **更好的可读性** - 无论背景透明度如何调整，倒计时内容始终清晰可见

---

## [1.0.10] - 2025-12-01

### 🐛 修复

#### 透明度控制
- 🔧 **修复透明度滑块** - 修复了拖动透明度滑块时窗口透明度不变化的问题
- 🔧 **启动时应用透明度** - 修复了重新启动后保存的透明度设置不生效的问题
- ✅ **IPC通信** - 现在透明度变化会正确通知主进程更新窗口透明度

---

## [1.0.9] - 2025-12-01

### 🎨 改进

#### 视觉微调
- ✨ **增大时间显示** - 时间字体从42px增大到48px，更清晰易读
- 📐 **优化窗口高度** - 默认高度从120px减小到110px，消除底部空白
- 🖌️ **调整内边距** - 优化布局间距，使界面更紧凑精致

---

## [1.0.8] - 2025-12-01

### 🐛 修复

#### UI细节
- 🔧 **移除多余边框** - 修复了默认状态下进度条下方显示1px横线的问题
- 🔧 **完美动态高度** - 优化高度计算逻辑，确保折叠项展开时窗口能完全包容内容
- 🔧 **解决按钮消失** - 修复了点击快捷设置时底部按钮可能显示不全的问题

---

## [1.0.7] - 2025-12-01

### ✨ 新增

#### 位置记忆
- ✅ **自动保存位置** - 移动窗口后自动记住位置
- ✅ **恢复上次位置** - 重新启动时出现在上次关闭的地方
- ✅ **默认右上角** - 首次启动默认显示在屏幕右上角（符合演讲习惯）

### 🐛 修复

#### 动态高度
- 🔧 **自适应内容高度** - 根据实际内容动态计算窗口高度，不再使用固定值
- 🔧 **解决显示不全** - 无论有多少折叠项展开，窗口都会自动变高以容纳内容
- 🔧 **CSS最大高度** - 增加控制面板CSS最大高度限制到800px

---

## [1.0.6] - 2025-12-01

### 🐛 修复

#### 滚动显示
- 🔧 **增加展开高度** - 将控制面板展开高度从500px增加到650px
- 🔧 **解决底部裁剪** - 确保在所有设置项展开时，底部内容不会被窗口裁剪
- 🔧 **适配最大高度** - 调整窗口最大高度限制以适应新的展开尺寸

---

## [1.0.5] - 2025-12-01

### 🐛 修复

#### 窗口缩放
- 🔧 **修复内容裁剪** - 在改变窗口物理大小时，同步应用CSS视觉缩放
- 🔧 **解决按钮不可见** - 确保在窗口缩小时，右侧的设置按钮不会被裁剪消失
- 🔧 **完美适配** - 实现了Electron窗口尺寸与HTML内容尺寸的完美同步

---

## [1.0.4] - 2025-12-01

### 🔧 重大改进

#### 真正的窗口缩放
- ✅ **修复窗口缩放** - 从CSS视觉缩放改为真正的Electron窗口大小改变
- ✅ **窗口真实改变** - 窗口本身变大/变小，不只是视觉效果
- ✅ **占用空间正确** - 占用屏幕空间相应改变
- ✅ **吸附更准确** - 拖动吸附基于实际窗口大小计算
- ✅ **任务栏正确** - 任务栏缩略图显示真实窗口大小

### 🎯 技术实现

- **移除CSS transform缩放**
- **通过IPC通知主进程改变窗口**
- **主进程使用setBounds改变实际大小**
- **展开高度也按比例缩放**
- **吸附逻辑基于当前窗口大小**

### 📊 效果对比

| 项目 | v1.0.3 (CSS缩放) | v1.0.4 (真实缩放) |
|------|-----------------|------------------|
| 窗口大小 | 固定250x140px | 随缩放改变 ✅ |
| 占用空间 | 固定 | 动态改变 ✅ |
| 拖动吸附 | 按固定大小 | 按实际大小 ✅ |
| 任务栏显示 | 固定大小 | 实际大小 ✅ |
| 清晰度 | 可能模糊 | 更清晰 ✅ |

### 🔄 变更

- 窗口最小宽度：200px（80%）
- 窗口最大宽度：375px（150%）
- 窗口最小高度：112px（80%）
- 窗口最大高度：750px（150% * 展开高度）
- 展开高度随缩放比例调整

---

## [1.0.3] - 2025-12-01

### ✨ 新增

#### 窗口大小自定义
- ✅ 新增窗口大小缩放功能（80-150%）
- ✅ 实时预览效果
- ✅ 设置自动保存

#### 快捷时间自定义
- ✅ 可自定义3个快捷按钮的时间
- ✅ 范围1-60分钟
- ✅ 按钮文字自动更新
- ✅ 设置持久化保存

### 🐛 修复

- ✅ 移除鼠标悬停自动显示功能
- ✅ 默认状态不会露出部分控制面板
- ✅ 增加控制面板滚动高度到600px
- ✅ 所有内容可正常滚动查看

---

## [未发布]

### 计划中
- 音效提醒功能
- 多计时器支持
- 历史记录功能

---

**保持关注后续更新！** 🚀



